<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de productos</title>
    <style>
        h1{
            text-align: center;
        }
        form {
            max-width: 500px;
            margin: auto;
        }
        fieldset {
            margin-bottom: 30px;
            border: 1px solid black;
            padding: 10px;
        }
        input, textarea {
            width: 100%;
            padding: 6px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <h1>Registro de nuevos productos en el inventario</h1>
    <form id="formularioProductos" action="http://localhost/tecweb/practicas/p08/set_producto_v2.php" method="post" onsubmit="return validarFormulario()">
        <fieldset>
            <h1>Ingresa la información del producto:</h1>
            <label for="nombre">Nombre: </label> <input type="text" name="nombre" id="nombre" maxlength="100" required>
            <label for="marca">Marca: </label> 
            <select name="marca" id="marca" required>
                <option value="">Selecciona una marca de electrónicos</option>
                <option value="Samsung">Samsung</option>
                <option value="HP">HP</option>
                <option value="Asus">Asus</option>
                <option value="Hisense">Hisense</option>
                <option value="Sony">Sony</option>
                <option value="Xbox">Xbox</option>
                <option value="Apple">Apple</option>
                <option value="Logitech">Logitech</option>
            </select><br></br>
            <label for="modelo">Modelo: </label> <input type="text" name="modelo" id="modelo" maxlength="25" required>
            <label for="precio">Precio: </label> <input type="number" name="precio" id="precio" step="0.01" min="100" placeholder="0.00" required>
            <label for="detalles">Detalles: </label> <textarea name="detalles" rows="5"  maxlength="250"></textarea>
            <label for="unidades">Unidades: </label> <input type="number" name="unidades" id="unidades" min="0" placeholder="0" required>
            <label for="imagen">URL de la imagen: (opcional)</label> <input type="text" name="imagen" id="imagen" placeholder="Ruta de la imagen">
        </fieldset>
        <input type="submit" value="Registrar Producto">
        <input type="reset" value="Limpiar Formulario">
    </form>

    <script>
        function validarFormulario(){
            var nombre = document.getElementById("nombre").value.trim();
            var marca = document.getElementById("marca").value;
            var modelo = document.getElementById("modelo").value.trim();
            var precio = parseFloat(document.getElementById("precio").value.trim());
            var detalles = document.getElementById("detalles").value.trim();
            var unidades = document.getElementById("unidades").value.trim();
            var imagen = document.getElementById("imagen").value.trim();

            if(nombre === "" || nombre.length > 100){
                alert("El nombre es necesario y no debe tener una longitud mayor a 100 caracteres.");
                return false;
            }
            if(marca === ""){
                alert("Debes seleccionar una marca.");
                return false;
            }

            function esAlfanumerico(str) {
                for (var i=0; i<str.length; i++) {
                    var c=str[i];
                    if (!((c >= "A" && c <= "Z") || (c >= "a" && c <= "z") || (c >= "0" && c <= "9") || (c === "-" || c === " "))) {
                        return false;
                    }
                }
                return true;
            }
            
            if(modelo === "" || modelo.length > 25 || esAlfanumerico(modelo) === false){
                alert("El modelo es requerido, su longitud no puede ser superior a 25 caracteres y debe estar en el sistema alfanumérico.");
                return false;
            }
            if(isNaN(precio) || precio < 100){
                alert("El precio es requerido y debe ser mayor a 99.99");
                return false;
            }
            if(detalles.length > 250){
                alert("Los detalles no deben exceder 250 caracteres");
                return false;
            }
            if(!imagen.value.trim()){
                imagen.value="img/vacio.png"
            }
            return true;
        }
    </script>
</body>
</html>